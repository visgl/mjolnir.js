"use strict";(self.webpackChunkproject_website=self.webpackChunkproject_website||[]).push([[509],{5292:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>u,default:()=>g,frontMatter:()=>c,metadata:()=>p,toc:()=>m});var i=n(4848),s=n(8453),o=n(6540),r=n(8616);class a{width=0;height=0;scale=1;angle=0;centerX=0;centerY=0;clone(){const e=new a;return e.width=this.width,e.height=this.height,e.scale=this.scale,e.angle=this.angle,e.centerX=this.centerX,e.centerY=this.centerY,e}project(e){let{x:t,y:n}=e;t-=this.width/2,n-=this.height/2;const i=l({x:t,y:n},this.angle);return i.x=i.x*this.scale+this.centerX+this.width/2,i.y=i.y*this.scale+this.centerY+this.height/2,i}unproject(e){let{x:t,y:n}=e;t=(t-this.centerX-this.width/2)/this.scale,n=(n-this.centerY-this.height/2)/this.scale;const i=l({x:t,y:n},-this.angle);return i.x+=this.width/2,i.y+=this.height/2,i}toCSSTransform(){return`translate(${this.centerX}px, ${this.centerY}px) scale(${this.scale}) rotate(${this.angle}deg)`}}function l(e,t){const n=t*Math.PI/180;return{x:e.x*Math.cos(n)-e.y*Math.sin(n),y:e.x*Math.sin(n)+e.y*Math.cos(n)}}function h(){const e=o.useRef(null);return o.useEffect((()=>{e.current&&function(e){const t=document.createElement("div");t.className="image-viewer";const n=document.createElement("img");n.src="https://upload.wikimedia.org/wikipedia/commons/7/75/Planisph%C3%A6ri_c%C5%93leste.jpg",n.style.maxWidth="400px",t.appendChild(n);const i=new a;let s,o;function l(){n.style.transform=i.toCSSTransform()}n.onload=()=>{i.width=n.width,i.height=n.height,i.centerX=t.clientWidth/2-n.width/2,i.centerY=t.clientHeight/2-n.height/2,l()};const h=new r.EU(t,{recognizers:[new r.h1,new r.uq],events:{pinchstart:function(e){s=i.clone(),o=i.unproject(e.offsetCenter)},pinchmove:function(e){i.scale=s.scale*e.scale,i.angle=s.angle+e.rotation;const t=i.project(o);i.centerX+=e.offsetCenter.x-t.x,i.centerY+=e.offsetCenter.y-t.y,l()},panstart:function(e){s=i.clone(),s.centerX-=e.deltaX,s.centerY-=e.deltaY},panmove:function(e){i.centerX=s.centerX+e.deltaX,i.centerY=s.centerY+e.deltaY,l()},wheel:function(e){e.preventDefault(),o=i.unproject(e.offsetCenter),i.scale*=e.delta>0?1.1:1/1.1;const t=i.project(o);i.centerX+=e.offsetCenter.x-t.x,i.centerY+=e.offsetCenter.y-t.y,l()}}});e.appendChild(t)}(e.current)}),[]),(0,i.jsx)("div",{style:{height:"100%"},ref:e})}const c={},u="Image Viewer",p={id:"image-viewer",title:"Image Viewer",description:"",source:"@site/src/examples/image-viewer.mdx",sourceDirName:".",slug:"/image-viewer",permalink:"/mjolnir.js/examples/image-viewer",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"defaultSidebar",previous:{title:"Event Manager",permalink:"/mjolnir.js/examples/event-manager"}},d={},m=[];function v(e){const t={h1:"h1",header:"header",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.header,{children:(0,i.jsx)(t.h1,{id:"image-viewer",children:"Image Viewer"})}),"\n","\n",(0,i.jsx)(h,{})]})}function g(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(v,{...e})}):v(e)}},8616:(e,t,n)=>{n.d(t,{EU:()=>he,uq:()=>O,h1:()=>H,ac:()=>V,k2:()=>q,Hp:()=>j,Cx:()=>F});const i=25;let s=function(e){return e[e.Start=1]="Start",e[e.Move=2]="Move",e[e.End=4]="End",e[e.Cancel=8]="Cancel",e}({}),o=function(e){return e[e.None=0]="None",e[e.Left=1]="Left",e[e.Right=2]="Right",e[e.Up=4]="Up",e[e.Down=8]="Down",e[e.Horizontal=3]="Horizontal",e[e.Vertical=12]="Vertical",e[e.All=15]="All",e}({}),r=function(e){return e[e.Possible=1]="Possible",e[e.Began=2]="Began",e[e.Changed=4]="Changed",e[e.Ended=8]="Ended",e[e.Recognized=8]="Recognized",e[e.Cancelled=16]="Cancelled",e[e.Failed=32]="Failed",e}({});const a="auto",l="manipulation",h="none",c="pan-x",u="pan-y";class p{actions="";constructor(e,t){this.manager=e,this.set(t)}set(e){"compute"===e&&(e=this.compute()),this.manager.element&&(this.manager.element.style.touchAction=e,this.actions=e)}update(){this.set(this.manager.options.touchAction)}compute(){let e=[];for(const t of this.manager.recognizers)t.options.enable&&(e=e.concat(t.getTouchAction()));return function(e){if(e.includes(h))return h;const t=e.includes(c),n=e.includes(u);return t&&n?h:t||n?t?c:u:e.includes(l)?l:a}(e.join(" "))}}function d(e){return e.trim().split(/\s+/g)}function m(e,t,n){if(e)for(const i of d(t))e.addEventListener(i,n,!1)}function v(e,t,n){if(e)for(const i of d(t))e.removeEventListener(i,n,!1)}function g(e){return(e.ownerDocument||e).defaultView}function f(e){const t=e.length;if(1===t)return{x:Math.round(e[0].clientX),y:Math.round(e[0].clientY)};let n=0,i=0,s=0;for(;s<t;)n+=e[s].clientX,i+=e[s].clientY,s++;return{x:Math.round(n/t),y:Math.round(i/t)}}function y(e){const t=[];let n=0;for(;n<e.pointers.length;)t[n]={clientX:Math.round(e.pointers[n].clientX),clientY:Math.round(e.pointers[n].clientY)},n++;return{timeStamp:Date.now(),pointers:t,center:f(t),deltaX:e.deltaX,deltaY:e.deltaY}}function E(e,t){const n=t.x-e.x,i=t.y-e.y;return Math.sqrt(n*n+i*i)}function b(e,t){const n=t.clientX-e.clientX,i=t.clientY-e.clientY;return Math.sqrt(n*n+i*i)}function x(e,t){const n=t.clientX-e.clientX,i=t.clientY-e.clientY;return 180*Math.atan2(i,n)/Math.PI}function w(e,t){return e===t?o.None:Math.abs(e)>=Math.abs(t)?e<0?o.Left:o.Right:t<0?o.Up:o.Down}function T(e,t,n){return{x:t/e||0,y:n/e||0}}function C(e,t){const{session:n}=e,{pointers:o}=t,{length:r}=o;n.firstInput||(n.firstInput=y(t)),r>1&&!n.firstMultiple?n.firstMultiple=y(t):1===r&&(n.firstMultiple=!1);const{firstInput:a,firstMultiple:l}=n,h=l?l.center:a.center,c=t.center=f(o);t.timeStamp=Date.now(),t.deltaTime=t.timeStamp-a.timeStamp,t.angle=function(e,t){const n=t.x-e.x,i=t.y-e.y;return 180*Math.atan2(i,n)/Math.PI}(h,c),t.distance=E(h,c);const{deltaX:u,deltaY:p}=function(e,t){const n=t.center;let i=e.offsetDelta,o=e.prevDelta;const r=e.prevInput;return t.eventType!==s.Start&&r?.eventType!==s.End||(o=e.prevDelta={x:r?.deltaX||0,y:r?.deltaY||0},i=e.offsetDelta={x:n.x,y:n.y}),{deltaX:o.x+(n.x-i.x),deltaY:o.y+(n.y-i.y)}}(n,t);t.deltaX=u,t.deltaY=p,t.offsetDirection=w(t.deltaX,t.deltaY);const d=T(t.deltaTime,t.deltaX,t.deltaY);var m,v;t.overallVelocityX=d.x,t.overallVelocityY=d.y,t.overallVelocity=Math.abs(d.x)>Math.abs(d.y)?d.x:d.y,t.scale=l?(m=l.pointers,b((v=o)[0],v[1])/b(m[0],m[1])):1,t.rotation=l?function(e,t){return x(t[1],t[0])-x(e[1],e[0])}(l.pointers,o):0,t.maxPointers=n.prevInput?t.pointers.length>n.prevInput.maxPointers?t.pointers.length:n.prevInput.maxPointers:t.pointers.length;let g=e.element;return function(e,t){let n=e;for(;n;){if(n===t)return!0;n=e.parentNode}return!1}(t.srcEvent.target,g)&&(g=t.srcEvent.target),t.target=g,function(e,t){const n=e.lastInterval||t,o=t.timeStamp-n.timeStamp;let r,a,l,h;if(t.eventType!==s.Cancel&&(o>i||void 0===n.velocity)){const i=t.deltaX-n.deltaX,s=t.deltaY-n.deltaY,c=T(o,i,s);a=c.x,l=c.y,r=Math.abs(c.x)>Math.abs(c.y)?c.x:c.y,h=w(i,s),e.lastInterval=t}else r=n.velocity,a=n.velocityX,l=n.velocityY,h=n.direction;t.velocity=r,t.velocityX=a,t.velocityY=l,t.direction=h}(n,t),t}class z{evEl="";evWin="";evTarget="";constructor(e){this.manager=e,this.element=e.element,this.target=e.options.inputTarget||e.element}domHandler=e=>{this.manager.options.enable&&this.handler(e)};callback(e,t){!function(e,t,n){const i=n.pointers.length,o=n.changedPointers.length,r=t&s.Start&&i-o==0,a=t&(s.End|s.Cancel)&&i-o==0;n.isFirst=Boolean(r),n.isFinal=Boolean(a),r&&(e.session={}),n.eventType=t;const l=C(e,n);e.emit("hammer.input",l),e.recognize(l),e.session.prevInput=l}(this.manager,e,t)}init(){m(this.element,this.evEl,this.domHandler),m(this.target,this.evTarget,this.domHandler),m(g(this.element),this.evWin,this.domHandler)}destroy(){v(this.element,this.evEl,this.domHandler),v(this.target,this.evTarget,this.domHandler),v(g(this.element),this.evWin,this.domHandler)}}const _={pointerdown:s.Start,pointermove:s.Move,pointerup:s.End,pointercancel:s.Cancel,pointerout:s.Cancel};class M extends z{constructor(e){super(e),this.evEl="pointerdown",this.evWin="pointermove pointerup pointercancel",this.store=this.manager.session.pointerEvents=[],this.init()}handler(e){const{store:t}=this;let n=!1;const i=_[e.type],o=e.pointerType,r="touch"===o;let a=t.findIndex((t=>t.pointerId===e.pointerId));i&s.Start&&(e.buttons||r)?a<0&&(t.push(e),a=t.length-1):i&(s.End|s.Cancel)&&(n=!0),a<0||(t[a]=e,this.callback(i,{pointers:t,changedPointers:[e],eventType:i,pointerType:o,srcEvent:e}),n&&t.splice(a,1))}}const X=["","webkit","Moz","MS","ms","o"];function A(e,t){const n=t[0].toUpperCase()+t.slice(1);for(const i of X){const s=i?i+n:t;if(s in e)return s}}const Y={touchAction:"compute",enable:!0,inputTarget:null,cssProps:{userSelect:"none",userDrag:"none",touchCallout:"none",tapHighlightColor:"rgba(0,0,0,0)"}};class I{constructor(e,t){this.options={...Y,...t,cssProps:{...Y.cssProps,...t.cssProps},inputTarget:t.inputTarget||e},this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=new M(this),this.touchAction=new p(this,this.options.touchAction),this.toggleCssProps(!0)}set(e){return Object.assign(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this}stop(e){this.session.stopped=e?2:1}recognize(e){const{session:t}=this;if(t.stopped)return;let n;this.session.prevented&&e.srcEvent.preventDefault();const{recognizers:i}=this;let{curRecognizer:s}=t;(!s||s&&s.state&r.Recognized)&&(s=t.curRecognizer=null);let o=0;for(;o<i.length;)n=i[o],2===t.stopped||s&&n!==s&&!n.canRecognizeWith(s)?n.reset():n.recognize(e),!s&&n.state&(r.Began|r.Changed|r.Ended)&&(s=t.curRecognizer=n),o++}get(e){const{recognizers:t}=this;for(let n=0;n<t.length;n++)if(t[n].options.event===e)return t[n];return null}add(e){if(Array.isArray(e)){for(const t of e)this.add(t);return this}const t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e}remove(e){if(Array.isArray(e)){for(const t of e)this.remove(t);return this}const t="string"==typeof e?this.get(e):e;if(t){const{recognizers:e}=this,n=e.indexOf(t);-1!==n&&(e.splice(n,1),this.touchAction.update())}return this}on(e,t){if(!e||!t)return;const{handlers:n}=this;for(const i of d(e))n[i]=n[i]||[],n[i].push(t)}off(e,t){if(!e)return;const{handlers:n}=this;for(const i of d(e))t?n[i]&&n[i].splice(n[i].indexOf(t),1):delete n[i]}emit(e,t){const n=this.handlers[e]&&this.handlers[e].slice();if(!n||!n.length)return;const i=t;i.type=e,i.preventDefault=function(){t.srcEvent.preventDefault()};let s=0;for(;s<n.length;)n[s](i),s++}destroy(){this.toggleCssProps(!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}toggleCssProps(e){const{element:t}=this;if(t){for(const[n,i]of Object.entries(this.options.cssProps)){const s=A(t.style,n);e?(this.oldCssProps[s]=t.style[s],t.style[s]=i):t.style[s]=this.oldCssProps[s]||""}e||(this.oldCssProps={})}}}let k=1;function P(e){return e&r.Cancelled?"cancel":e&r.Ended?"end":e&r.Changed?"move":e&r.Began?"start":""}class R{constructor(e){this.options=e,this.id=k++,this.state=r.Possible,this.simultaneous={},this.requireFail=[]}set(e){return Object.assign(this.options,e),this.manager.touchAction.update(),this}recognizeWith(e){if(Array.isArray(e)){for(const t of e)this.recognizeWith(t);return this}let t;if("string"==typeof e){if(t=this.manager.get(e),!t)throw new Error(`Cannot find recognizer ${e}`)}else t=e;const{simultaneous:n}=this;return n[t.id]||(n[t.id]=t,t.recognizeWith(this)),this}dropRecognizeWith(e){if(Array.isArray(e)){for(const t of e)this.dropRecognizeWith(t);return this}let t;return t="string"==typeof e?this.manager.get(e):e,t&&delete this.simultaneous[t.id],this}requireFailure(e){if(Array.isArray(e)){for(const t of e)this.requireFailure(t);return this}let t;if("string"==typeof e){if(t=this.manager.get(e),!t)throw new Error(`Cannot find recognizer ${e}`)}else t=e;const{requireFail:n}=this;return-1===n.indexOf(t)&&(n.push(t),t.requireFailure(this)),this}dropRequireFailure(e){if(Array.isArray(e)){for(const t of e)this.dropRequireFailure(t);return this}let t;if(t="string"==typeof e?this.manager.get(e):e,t){const e=this.requireFail.indexOf(t);e>-1&&this.requireFail.splice(e,1)}return this}hasRequireFailures(){return Boolean(this.requireFail.find((e=>e.options.enable)))}canRecognizeWith(e){return Boolean(this.simultaneous[e.id])}emit(e){if(!e)return;const{state:t}=this;t<r.Ended&&this.manager.emit(this.options.event+P(t),e),this.manager.emit(this.options.event,e),e.additionalEvent&&this.manager.emit(e.additionalEvent,e),t>=r.Ended&&this.manager.emit(this.options.event+P(t),e)}tryEmit(e){this.canEmit()?this.emit(e):this.state=r.Failed}canEmit(){let e=0;for(;e<this.requireFail.length;){if(!(this.requireFail[e].state&(r.Failed|r.Possible)))return!1;e++}return!0}recognize(e){const t={...e};if(!this.options.enable)return this.reset(),void(this.state=r.Failed);this.state&(r.Recognized|r.Cancelled|r.Failed)&&(this.state=r.Possible),this.state=this.process(t),this.state&(r.Began|r.Changed|r.Ended|r.Cancelled)&&this.tryEmit(t)}getEventNames(){return[this.options.event]}reset(){}}class B extends R{attrTest(e){const t=this.options.pointers;return 0===t||e.pointers.length===t}process(e){const{state:t}=this,{eventType:n}=e,i=t&(r.Began|r.Changed),o=this.attrTest(e);return i&&(n&s.Cancel||!o)?t|r.Cancelled:i||o?n&s.End?t|r.Ended:t&r.Began?t|r.Changed:r.Began:r.Failed}}class F extends R{pTime=null;pCenter=null;_timer=null;_input=null;count=0;constructor(e){void 0===e&&(e={}),super({enable:!0,event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10,...e})}getTouchAction(){return[l]}process(e){const{options:t}=this,n=e.pointers.length===t.pointers,i=e.distance<t.threshold,o=e.deltaTime<t.time;if(this.reset(),e.eventType&s.Start&&0===this.count)return this.failTimeout();if(i&&o&&n){if(e.eventType!==s.End)return this.failTimeout();const n=!this.pTime||e.timeStamp-this.pTime<t.interval,i=!this.pCenter||E(this.pCenter,e.center)<t.posThreshold;this.pTime=e.timeStamp,this.pCenter=e.center,i&&n?this.count+=1:this.count=1,this._input=e;if(0===this.count%t.taps)return this.hasRequireFailures()?(this._timer=setTimeout((()=>{this.state=r.Recognized,this.tryEmit(this._input)}),t.interval),r.Began):r.Recognized}return r.Failed}failTimeout(){return this._timer=setTimeout((()=>{this.state=r.Failed}),this.options.interval),r.Failed}reset(){clearTimeout(this._timer)}emit(e){this.state===r.Recognized&&(e.tapCount=this.count,this.manager.emit(this.options.event,e))}}const D=["","start","move","end","cancel","up","down","left","right"];class O extends B{constructor(e){void 0===e&&(e={}),super({enable:!0,pointers:1,event:"pan",threshold:10,direction:o.All,...e}),this.pX=null,this.pY=null}getTouchAction(){const{options:{direction:e}}=this,t=[];return e&o.Horizontal&&t.push(u),e&o.Vertical&&t.push(c),t}getEventNames(){return D.map((e=>this.options.event+e))}directionTest(e){const{options:t}=this;let n=!0,{distance:i}=e,{direction:s}=e;const r=e.deltaX,a=e.deltaY;return s&t.direction||(t.direction&o.Horizontal?(s=0===r?o.None:r<0?o.Left:o.Right,n=r!==this.pX,i=Math.abs(e.deltaX)):(s=0===a?o.None:a<0?o.Up:o.Down,n=a!==this.pY,i=Math.abs(e.deltaY))),e.direction=s,n&&i>t.threshold&&Boolean(s&t.direction)}attrTest(e){return super.attrTest(e)&&(Boolean(this.state&r.Began)||!(this.state&r.Began)&&this.directionTest(e))}emit(e){this.pX=e.deltaX,this.pY=e.deltaY;const t=o[e.direction].toLowerCase();t&&(e.additionalEvent=this.options.event+t),super.emit(e)}}const L=["","up","down","left","right"];class j extends B{constructor(e){void 0===e&&(e={}),super({enable:!0,event:"swipe",threshold:10,velocity:.3,direction:o.All,pointers:1,...e})}getTouchAction(){return O.prototype.getTouchAction.call(this)}getEventNames(){return L.map((e=>this.options.event+e))}attrTest(e){const{direction:t}=this.options;let n=0;return t&o.All?n=e.overallVelocity:t&o.Horizontal?n=e.overallVelocityX:t&o.Vertical&&(n=e.overallVelocityY),super.attrTest(e)&&Boolean(t&e.offsetDirection)&&e.distance>this.options.threshold&&e.maxPointers===this.options.pointers&&Math.abs(n)>this.options.velocity&&Boolean(e.eventType&s.End)}emit(e){const t=o[e.offsetDirection].toLowerCase();t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}const N=["","start","move","end","cancel","in","out"];class H extends B{constructor(e){void 0===e&&(e={}),super({enable:!0,event:"pinch",threshold:0,pointers:2,...e})}getTouchAction(){return[h]}getEventNames(){return N.map((e=>this.options.event+e))}attrTest(e){return super.attrTest(e)&&(Math.abs(e.scale-1)>this.options.threshold||Boolean(this.state&r.Began))}emit(e){if(1!==e.scale){const t=e.scale<1?"in":"out";e.additionalEvent=this.options.event+t}super.emit(e)}}const S=["","start","move","end","cancel"];class q extends B{constructor(e){void 0===e&&(e={}),super({enable:!0,event:"rotate",threshold:0,pointers:2,...e})}getTouchAction(){return[h]}getEventNames(){return S.map((e=>this.options.event+e))}attrTest(e){return super.attrTest(e)&&(Math.abs(e.rotation)>this.options.threshold||Boolean(this.state&r.Began))}}const W=["","up"];class V extends R{_timer=null;_input=null;constructor(e){void 0===e&&(e={}),super({enable:!0,event:"press",pointers:1,time:251,threshold:9,...e})}getTouchAction(){return[a]}getEventNames(){return W.map((e=>this.options.event+e))}process(e){const{options:t}=this,n=e.pointers.length===t.pointers,i=e.distance<t.threshold,o=e.deltaTime>t.time;if(this._input=e,!i||!n||e.eventType&(s.End|s.Cancel)&&!o)this.reset();else if(e.eventType&s.Start)this.reset(),this._timer=setTimeout((()=>{this.state=r.Recognized,this.tryEmit()}),t.time);else if(e.eventType&s.End)return r.Recognized;return r.Failed}reset(){clearTimeout(this._timer)}emit(e){this.state===r.Recognized&&(e&&e.eventType&s.End?this.manager.emit(`${this.options.event}up`,e):(this._input.timeStamp=Date.now(),this.manager.emit(this.options.event,this._input)))}}class U{constructor(e,t,n){this.element=e,this.callback=t,this.options=n}}const $="undefined"!=typeof navigator&&navigator.userAgent?navigator.userAgent.toLowerCase():"",K=("undefined"!=typeof window?window:n.g,void 0!==n.g?n.g:window,"undefined"!=typeof document&&document,-1!==$.indexOf("firefox")),G=4.000244140625;class J extends U{constructor(e,t,n){super(e,t,{enable:!0,...n}),e.addEventListener("wheel",this.handleEvent,{passive:!1})}destroy(){this.element.removeEventListener("wheel",this.handleEvent)}enableEventType(e,t){"wheel"===e&&(this.options.enable=t)}handleEvent=e=>{if(!this.options.enable)return;let t=e.deltaY;globalThis.WheelEvent&&(K&&e.deltaMode===globalThis.WheelEvent.DOM_DELTA_PIXEL&&(t/=globalThis.devicePixelRatio),e.deltaMode===globalThis.WheelEvent.DOM_DELTA_LINE&&(t*=40)),0!==t&&t%G==0&&(t=Math.floor(t/G)),e.shiftKey&&t&&(t*=.25),this.callback({type:"wheel",center:{x:e.clientX,y:e.clientY},delta:-t,srcEvent:e,pointerType:"mouse",target:e.target})}}const Q=["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"];class Z extends U{constructor(e,t,n){super(e,t,{enable:!0,...n}),this.pressed=!1;const{enable:i}=this.options;this.enableMoveEvent=i,this.enableLeaveEvent=i,this.enableEnterEvent=i,this.enableOutEvent=i,this.enableOverEvent=i,Q.forEach((t=>e.addEventListener(t,this.handleEvent)))}destroy(){Q.forEach((e=>this.element.removeEventListener(e,this.handleEvent)))}enableEventType(e,t){switch(e){case"pointermove":this.enableMoveEvent=t;break;case"pointerover":this.enableOverEvent=t;break;case"pointerout":this.enableOutEvent=t;break;case"pointerenter":this.enableEnterEvent=t;break;case"pointerleave":this.enableLeaveEvent=t}}handleEvent=e=>{this.handleOverEvent(e),this.handleOutEvent(e),this.handleEnterEvent(e),this.handleLeaveEvent(e),this.handleMoveEvent(e)};handleOverEvent(e){this.enableOverEvent&&"mouseover"===e.type&&this._emit("pointerover",e)}handleOutEvent(e){this.enableOutEvent&&"mouseout"===e.type&&this._emit("pointerout",e)}handleEnterEvent(e){this.enableEnterEvent&&"mouseenter"===e.type&&this._emit("pointerenter",e)}handleLeaveEvent(e){this.enableLeaveEvent&&"mouseleave"===e.type&&this._emit("pointerleave",e)}handleMoveEvent(e){if(this.enableMoveEvent)switch(e.type){case"mousedown":e.button>=0&&(this.pressed=!0);break;case"mousemove":0===e.buttons&&(this.pressed=!1),this.pressed||this._emit("pointermove",e);break;case"mouseup":this.pressed=!1}}_emit(e,t){this.callback({type:e,center:{x:t.clientX,y:t.clientY},srcEvent:t,pointerType:"mouse",target:t.target})}}const ee=["keydown","keyup"];class te extends U{constructor(e,t,n){super(e,t,{enable:!0,tabIndex:0,...n}),this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,e.tabIndex=this.options.tabIndex,e.style.outline="none",ee.forEach((t=>e.addEventListener(t,this.handleEvent)))}destroy(){ee.forEach((e=>this.element.removeEventListener(e,this.handleEvent)))}enableEventType(e,t){"keydown"===e&&(this.enableDownEvent=t),"keyup"===e&&(this.enableUpEvent=t)}handleEvent=e=>{const t=e.target||e.srcElement;"INPUT"===t.tagName&&"text"===t.type||"TEXTAREA"===t.tagName||(this.enableDownEvent&&"keydown"===e.type&&this.callback({type:"keydown",srcEvent:e,key:e.key,target:e.target}),this.enableUpEvent&&"keyup"===e.type&&this.callback({type:"keyup",srcEvent:e,key:e.key,target:e.target}))}}class ne extends U{constructor(e,t,n){super(e,t,n),e.addEventListener("contextmenu",this.handleEvent)}destroy(){this.element.removeEventListener("contextmenu",this.handleEvent)}enableEventType(e,t){"contextmenu"===e&&(this.options.enable=t)}handleEvent=e=>{this.options.enable&&this.callback({type:"contextmenu",center:{x:e.clientX,y:e.clientY},srcEvent:e,pointerType:"mouse",target:e.target})}}const ie={pointerdown:1,pointermove:2,pointerup:4,mousedown:1,mousemove:2,mouseup:4};function se(e){const t=ie[e.srcEvent.type];if(!t)return null;const{buttons:n,button:i}=e.srcEvent;let s=!1,o=!1,r=!1;return 2===t?(s=Boolean(1&n),o=Boolean(4&n),r=Boolean(2&n)):(s=0===i,o=1===i,r=2===i),{leftButton:s,middleButton:o,rightButton:r}}function oe(e,t){const n=e.center;if(!n)return null;const i=t.getBoundingClientRect(),s=i.width/t.offsetWidth||1,o=i.height/t.offsetHeight||1;return{center:n,offsetCenter:{x:(n.x-i.left-t.clientLeft)/s,y:(n.y-i.top-t.clientTop)/o}}}const re={srcElement:"root",priority:0};class ae{constructor(e,t){this.eventManager=e,this.recognizerName=t,this.handlers=[],this.handlersByElement=new Map,this._active=!1}isEmpty(){return!this._active}add(e,t,n,i,s){void 0===i&&(i=!1),void 0===s&&(s=!1);const{handlers:o,handlersByElement:r}=this,a={...re,...n};let l=r.get(a.srcElement);l||(l=[],r.set(a.srcElement,l));const h={type:e,handler:t,srcElement:a.srcElement,priority:a.priority};i&&(h.once=!0),s&&(h.passive=!0),o.push(h),this._active=this._active||!h.passive;let c=l.length-1;for(;c>=0&&!(l[c].priority>=h.priority);)c--;l.splice(c+1,0,h)}remove(e,t){const{handlers:n,handlersByElement:i}=this;for(let s=n.length-1;s>=0;s--){const o=n[s];if(o.type===e&&o.handler===t){n.splice(s,1);const e=i.get(o.srcElement);e.splice(e.indexOf(o),1),0===e.length&&i.delete(o.srcElement)}}this._active=n.some((e=>!e.passive))}handleEvent=e=>{if(this.isEmpty())return;const t=this._normalizeEvent(e);let n=e.srcEvent.target;for(;n&&n!==t.rootElement;){if(this._emit(t,n),t.handled)return;n=n.parentNode}this._emit(t,"root")};_emit(e,t){const n=this.handlersByElement.get(t);if(n){let t=!1;const i=()=>{e.handled=!0},s=()=>{e.handled=!0,t=!0},o=[];for(let r=0;r<n.length;r++){const{type:a,handler:l,once:h}=n[r];if(l({...e,type:a,stopPropagation:i,stopImmediatePropagation:s}),h&&o.push(n[r]),t)break}for(let e=0;e<o.length;e++){const{type:t,handler:n}=o[e];this.remove(t,n)}}}_normalizeEvent(e){const t=this.eventManager.getElement();return{...e,...se(e),...oe(e,t),preventDefault:()=>{e.srcEvent.preventDefault()},stopImmediatePropagation:null,stopPropagation:null,handled:!1,rootElement:t}}}function le(e){if("recognizer"in e)return e;let t;const n=Array.isArray(e)?[...e]:[e];if("function"==typeof n[0]){t=new(n.shift())(n.shift()||{})}else t=n.shift();return{recognizer:t,recognizeWith:"string"==typeof n[0]?[n[0]]:n[0],requireFailure:"string"==typeof n[1]?[n[1]]:n[1]}}class he{constructor(e,t){if(void 0===e&&(e=null),void 0===t&&(t={}),this.options={recognizers:[],events:{},touchAction:"compute",tabIndex:0,cssProps:{},...t},this.events=new Map,this.element=e,e){this.manager=new I(e,this.options);for(const e of this.options.recognizers){const{recognizer:t,recognizeWith:n,requireFailure:i}=le(e);this.manager.add(t),n&&t.recognizeWith(n),i&&t.requireFailure(i)}this.manager.on("hammer.input",this._onBasicInput),this.wheelInput=new J(e,this._onOtherEvent,{enable:!1}),this.moveInput=new Z(e,this._onOtherEvent,{enable:!1}),this.keyInput=new te(e,this._onOtherEvent,{enable:!1,tabIndex:t.tabIndex}),this.contextmenuInput=new ne(e,this._onOtherEvent,{enable:!1}),this.on(this.options.events)}}getElement(){return this.element}destroy(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy())}on(e,t,n){this._addEventHandler(e,t,n,!1)}once(e,t,n){this._addEventHandler(e,t,n,!0)}watch(e,t,n){this._addEventHandler(e,t,n,!1,!0)}off(e,t){this._removeEventHandler(e,t)}_toggleRecognizer(e,t){const{manager:n}=this;if(!n)return;const i=n.get(e);i&&(i.set({enable:t}),n.touchAction.update()),this.wheelInput?.enableEventType(e,t),this.moveInput?.enableEventType(e,t),this.keyInput?.enableEventType(e,t),this.contextmenuInput?.enableEventType(e,t)}_addEventHandler(e,t,n,i,s){if("string"!=typeof e){n=t;for(const[t,o]of Object.entries(e))this._addEventHandler(t,o,n,i,s);return}const{manager:o,events:r}=this;if(!o)return;let a=r.get(e);if(!a){const t=this._getRecognizerName(e)||e;a=new ae(this,t),r.set(e,a),o&&o.on(e,a.handleEvent)}a.add(e,t,n,i,s),a.isEmpty()||this._toggleRecognizer(a.recognizerName,!0)}_removeEventHandler(e,t){if("string"!=typeof e){for(const[t,n]of Object.entries(e))this._removeEventHandler(t,n);return}const{events:n}=this,i=n.get(e);if(i&&(i.remove(e,t),i.isEmpty())){const{recognizerName:e}=i;let t=!1;for(const i of n.values())if(i.recognizerName===e&&!i.isEmpty()){t=!0;break}t||this._toggleRecognizer(e,!1)}}_getRecognizerName(e){return this.manager.recognizers.find((t=>t.getEventNames().includes(e)))?.options.event}_onBasicInput=e=>{this.manager.emit(e.srcEvent.type,e)};_onOtherEvent=e=>{this.manager.emit(e.type,e)}}},8453:(e,t,n)=>{n.d(t,{R:()=>r,x:()=>a});var i=n(6540);const s={},o=i.createContext(s);function r(e){const t=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),i.createElement(o.Provider,{value:t},e.children)}}}]);