"use strict";(self.webpackChunkproject_website=self.webpackChunkproject_website||[]).push([[631],{7295:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>g,contentTitle:()=>v,default:()=>y,frontMatter:()=>d,metadata:()=>m,toc:()=>f});var i=n(4848),s=n(8453),o=n(6540),r=(n(961),n(8616));const a=[[r.k2,{enable:!1}],[r.h1,{enable:!1},["rotate"]],[r.Hp,{enable:!1}],[r.uq,{threshold:1,enable:!1},["pinch"],["swipe"]],[r.ac,{enable:!1}],[r.Cx,{event:"dblclick",taps:2,enable:!1}],[r.Cx,{event:"anyclick",enable:!1},["dblclick"]],[r.Cx,{event:"click",enable:!1},["anyclick"],["dblclick"]]],l=["click","anyclick","dblclick","pointerdown","pointermove","pointerup","pointerover","pointerout","pointerleave","pinchin","pinchout","pinchstart","pinchmove","pinchend","pinchcancel","rotatestart","rotatemove","rotateend","rotatecancel","panstart","panmove","panend","pancancel","panup","pandown","panleft","panright","swipe","swipeleft","swiperight","swipeup","swipedown","keydown","keyup","wheel"],c={click:!0,doubletap:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,panstart:!0,panmove:!0,panend:!0,wheel:!0};function h(){const e=(0,o.useRef)(),t=(0,o.useRef)(),[n,s]=(0,o.useState)(null),[h,d]=(0,o.useState)(c),[v,m]=(0,o.useState)([]),g=(0,o.useCallback)((e=>{e.srcEvent.preventDefault(),e.stopPropagation(),m((t=>((t=t.slice(0,30)).unshift(e),t)))}),[]);(0,o.useEffect)((()=>{const n=new r.EU(e.current,{recognizers:a});s(n);for(const e of l)c[e]&&(n.on(e,g),n.on(e,g,{srcElement:t.current}));return()=>{n.destroy()}}),[]);const f=(0,o.useCallback)((e=>{const{name:i,checked:s}=e.target;s?(n.on(i,g),n.on(i,g,{srcElement:t.current})):n.off(i,g),d((e=>({...e,[i]:s})))}),[n]);return(0,i.jsxs)("div",{id:"container",children:[(0,i.jsx)("div",{id:"options",children:l.map((e=>(0,i.jsx)(u,{eventName:e,value:h[e]||!1,onChange:f},e)))}),(0,i.jsxs)("div",{id:"content",children:[(0,i.jsx)("div",{id:"background",ref:e,onContextMenu:e=>e.preventDefault(),children:(0,i.jsx)("div",{id:"red-box",ref:t})}),(0,i.jsx)("div",{id:"logs",children:v.map(p)})]})]})}function p(e,t){return(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{children:e.type},"type"),(0,i.jsx)("span",{children:e.offsetCenter?`(${e.offsetCenter.x.toFixed(0)}, ${e.offsetCenter.y.toFixed(0)})`:""},"position"),(0,i.jsx)("span",{children:e.key||e.leftButton&&"left button"||e.middleButton&&"middle button"||e.rightButton&&"right button"},"button"),(0,i.jsx)("span",{children:e.target.id},"target")]},t)}function u(e){let{eventName:t,value:n,onChange:s}=e;const o=`input-${t}`;return(0,i.jsxs)("div",{children:[(0,i.jsx)("input",{id:o,type:"checkbox",name:t,checked:n,onChange:s}),(0,i.jsx)("label",{htmlFor:o,children:t})]},t)}const d={},v="Event Manager",m={id:"event-manager",title:"Event Manager",description:"",source:"@site/src/examples/event-manager.mdx",sourceDirName:".",slug:"/event-manager",permalink:"/mjolnir.js/examples/event-manager",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"defaultSidebar",previous:{title:"Examples",permalink:"/mjolnir.js/examples/"},next:{title:"Image Viewer",permalink:"/mjolnir.js/examples/image-viewer"}},g={},f=[];function E(e){const t={h1:"h1",header:"header",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.header,{children:(0,i.jsx)(t.h1,{id:"event-manager",children:"Event Manager"})}),"\n","\n",(0,i.jsx)(h,{})]})}function y(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(E,{...e})}):E(e)}},8616:(e,t,n)=>{n.d(t,{EU:()=>ce,uq:()=>D,h1:()=>H,ac:()=>V,k2:()=>q,Hp:()=>L,Cx:()=>X});const i=25;let s=function(e){return e[e.Start=1]="Start",e[e.Move=2]="Move",e[e.End=4]="End",e[e.Cancel=8]="Cancel",e}({}),o=function(e){return e[e.None=0]="None",e[e.Left=1]="Left",e[e.Right=2]="Right",e[e.Up=4]="Up",e[e.Down=8]="Down",e[e.Horizontal=3]="Horizontal",e[e.Vertical=12]="Vertical",e[e.All=15]="All",e}({}),r=function(e){return e[e.Possible=1]="Possible",e[e.Began=2]="Began",e[e.Changed=4]="Changed",e[e.Ended=8]="Ended",e[e.Recognized=8]="Recognized",e[e.Cancelled=16]="Cancelled",e[e.Failed=32]="Failed",e}({});const a="auto",l="manipulation",c="none",h="pan-x",p="pan-y";class u{actions="";constructor(e,t){this.manager=e,this.set(t)}set(e){"compute"===e&&(e=this.compute()),this.manager.element&&(this.manager.element.style.touchAction=e,this.actions=e)}update(){this.set(this.manager.options.touchAction)}compute(){let e=[];for(const t of this.manager.recognizers)t.options.enable&&(e=e.concat(t.getTouchAction()));return function(e){if(e.includes(c))return c;const t=e.includes(h),n=e.includes(p);return t&&n?c:t||n?t?h:p:e.includes(l)?l:a}(e.join(" "))}}function d(e){return e.trim().split(/\s+/g)}function v(e,t,n){if(e)for(const i of d(t))e.addEventListener(i,n,!1)}function m(e,t,n){if(e)for(const i of d(t))e.removeEventListener(i,n,!1)}function g(e){return(e.ownerDocument||e).defaultView}function f(e){const t=e.length;if(1===t)return{x:Math.round(e[0].clientX),y:Math.round(e[0].clientY)};let n=0,i=0,s=0;for(;s<t;)n+=e[s].clientX,i+=e[s].clientY,s++;return{x:Math.round(n/t),y:Math.round(i/t)}}function E(e){const t=[];let n=0;for(;n<e.pointers.length;)t[n]={clientX:Math.round(e.pointers[n].clientX),clientY:Math.round(e.pointers[n].clientY)},n++;return{timeStamp:Date.now(),pointers:t,center:f(t),deltaX:e.deltaX,deltaY:e.deltaY}}function y(e,t){const n=t.x-e.x,i=t.y-e.y;return Math.sqrt(n*n+i*i)}function b(e,t){const n=t.clientX-e.clientX,i=t.clientY-e.clientY;return Math.sqrt(n*n+i*i)}function x(e,t){const n=t.clientX-e.clientX,i=t.clientY-e.clientY;return 180*Math.atan2(i,n)/Math.PI}function T(e,t){return e===t?o.None:Math.abs(e)>=Math.abs(t)?e<0?o.Left:o.Right:t<0?o.Up:o.Down}function w(e,t,n){return{x:t/e||0,y:n/e||0}}function C(e,t){const{session:n}=e,{pointers:o}=t,{length:r}=o;n.firstInput||(n.firstInput=E(t)),r>1&&!n.firstMultiple?n.firstMultiple=E(t):1===r&&(n.firstMultiple=!1);const{firstInput:a,firstMultiple:l}=n,c=l?l.center:a.center,h=t.center=f(o);t.timeStamp=Date.now(),t.deltaTime=t.timeStamp-a.timeStamp,t.angle=function(e,t){const n=t.x-e.x,i=t.y-e.y;return 180*Math.atan2(i,n)/Math.PI}(c,h),t.distance=y(c,h);const{deltaX:p,deltaY:u}=function(e,t){const n=t.center;let i=e.offsetDelta,o=e.prevDelta;const r=e.prevInput;return t.eventType!==s.Start&&r?.eventType!==s.End||(o=e.prevDelta={x:r?.deltaX||0,y:r?.deltaY||0},i=e.offsetDelta={x:n.x,y:n.y}),{deltaX:o.x+(n.x-i.x),deltaY:o.y+(n.y-i.y)}}(n,t);t.deltaX=p,t.deltaY=u,t.offsetDirection=T(t.deltaX,t.deltaY);const d=w(t.deltaTime,t.deltaX,t.deltaY);var v,m;t.overallVelocityX=d.x,t.overallVelocityY=d.y,t.overallVelocity=Math.abs(d.x)>Math.abs(d.y)?d.x:d.y,t.scale=l?(v=l.pointers,b((m=o)[0],m[1])/b(v[0],v[1])):1,t.rotation=l?function(e,t){return x(t[1],t[0])-x(e[1],e[0])}(l.pointers,o):0,t.maxPointers=n.prevInput?t.pointers.length>n.prevInput.maxPointers?t.pointers.length:n.prevInput.maxPointers:t.pointers.length;let g=e.element;return function(e,t){let n=e;for(;n;){if(n===t)return!0;n=e.parentNode}return!1}(t.srcEvent.target,g)&&(g=t.srcEvent.target),t.target=g,function(e,t){const n=e.lastInterval||t,o=t.timeStamp-n.timeStamp;let r,a,l,c;if(t.eventType!==s.Cancel&&(o>i||void 0===n.velocity)){const i=t.deltaX-n.deltaX,s=t.deltaY-n.deltaY,h=w(o,i,s);a=h.x,l=h.y,r=Math.abs(h.x)>Math.abs(h.y)?h.x:h.y,c=T(i,s),e.lastInterval=t}else r=n.velocity,a=n.velocityX,l=n.velocityY,c=n.direction;t.velocity=r,t.velocityX=a,t.velocityY=l,t.direction=c}(n,t),t}class k{evEl="";evWin="";evTarget="";constructor(e){this.manager=e,this.element=e.element,this.target=e.options.inputTarget||e.element}domHandler=e=>{this.manager.options.enable&&this.handler(e)};callback(e,t){!function(e,t,n){const i=n.pointers.length,o=n.changedPointers.length,r=t&s.Start&&i-o==0,a=t&(s.End|s.Cancel)&&i-o==0;n.isFirst=Boolean(r),n.isFinal=Boolean(a),r&&(e.session={}),n.eventType=t;const l=C(e,n);e.emit("hammer.input",l),e.recognize(l),e.session.prevInput=l}(this.manager,e,t)}init(){v(this.element,this.evEl,this.domHandler),v(this.target,this.evTarget,this.domHandler),v(g(this.element),this.evWin,this.domHandler)}destroy(){m(this.element,this.evEl,this.domHandler),m(this.target,this.evTarget,this.domHandler),m(g(this.element),this.evWin,this.domHandler)}}const z={pointerdown:s.Start,pointermove:s.Move,pointerup:s.End,pointercancel:s.Cancel,pointerout:s.Cancel};class _ extends k{constructor(e){super(e),this.evEl="pointerdown",this.evWin="pointermove pointerup pointercancel",this.store=this.manager.session.pointerEvents=[],this.init()}handler(e){const{store:t}=this;let n=!1;const i=z[e.type],o=e.pointerType,r="touch"===o;let a=t.findIndex((t=>t.pointerId===e.pointerId));i&s.Start&&(e.buttons||r)?a<0&&(t.push(e),a=t.length-1):i&(s.End|s.Cancel)&&(n=!0),a<0||(t[a]=e,this.callback(i,{pointers:t,changedPointers:[e],eventType:i,pointerType:o,srcEvent:e}),n&&t.splice(a,1))}}const M=["","webkit","Moz","MS","ms","o"];function A(e,t){const n=t[0].toUpperCase()+t.slice(1);for(const i of M){const s=i?i+n:t;if(s in e)return s}}const I={touchAction:"compute",enable:!0,inputTarget:null,cssProps:{userSelect:"none",userDrag:"none",touchCallout:"none",tapHighlightColor:"rgba(0,0,0,0)"}};class B{constructor(e,t){this.options={...I,...t,cssProps:{...I.cssProps,...t.cssProps},inputTarget:t.inputTarget||e},this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=new _(this),this.touchAction=new u(this,this.options.touchAction),this.toggleCssProps(!0)}set(e){return Object.assign(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this}stop(e){this.session.stopped=e?2:1}recognize(e){const{session:t}=this;if(t.stopped)return;let n;this.session.prevented&&e.srcEvent.preventDefault();const{recognizers:i}=this;let{curRecognizer:s}=t;(!s||s&&s.state&r.Recognized)&&(s=t.curRecognizer=null);let o=0;for(;o<i.length;)n=i[o],2===t.stopped||s&&n!==s&&!n.canRecognizeWith(s)?n.reset():n.recognize(e),!s&&n.state&(r.Began|r.Changed|r.Ended)&&(s=t.curRecognizer=n),o++}get(e){const{recognizers:t}=this;for(let n=0;n<t.length;n++)if(t[n].options.event===e)return t[n];return null}add(e){if(Array.isArray(e)){for(const t of e)this.add(t);return this}const t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e}remove(e){if(Array.isArray(e)){for(const t of e)this.remove(t);return this}const t="string"==typeof e?this.get(e):e;if(t){const{recognizers:e}=this,n=e.indexOf(t);-1!==n&&(e.splice(n,1),this.touchAction.update())}return this}on(e,t){if(!e||!t)return;const{handlers:n}=this;for(const i of d(e))n[i]=n[i]||[],n[i].push(t)}off(e,t){if(!e)return;const{handlers:n}=this;for(const i of d(e))t?n[i]&&n[i].splice(n[i].indexOf(t),1):delete n[i]}emit(e,t){const n=this.handlers[e]&&this.handlers[e].slice();if(!n||!n.length)return;const i=t;i.type=e,i.preventDefault=function(){t.srcEvent.preventDefault()};let s=0;for(;s<n.length;)n[s](i),s++}destroy(){this.toggleCssProps(!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}toggleCssProps(e){const{element:t}=this;if(t){for(const[n,i]of Object.entries(this.options.cssProps)){const s=A(t.style,n);e?(this.oldCssProps[s]=t.style[s],t.style[s]=i):t.style[s]=this.oldCssProps[s]||""}e||(this.oldCssProps={})}}}let R=1;function P(e){return e&r.Cancelled?"cancel":e&r.Ended?"end":e&r.Changed?"move":e&r.Began?"start":""}class j{constructor(e){this.options=e,this.id=R++,this.state=r.Possible,this.simultaneous={},this.requireFail=[]}set(e){return Object.assign(this.options,e),this.manager.touchAction.update(),this}recognizeWith(e){if(Array.isArray(e)){for(const t of e)this.recognizeWith(t);return this}let t;if("string"==typeof e){if(t=this.manager.get(e),!t)throw new Error(`Cannot find recognizer ${e}`)}else t=e;const{simultaneous:n}=this;return n[t.id]||(n[t.id]=t,t.recognizeWith(this)),this}dropRecognizeWith(e){if(Array.isArray(e)){for(const t of e)this.dropRecognizeWith(t);return this}let t;return t="string"==typeof e?this.manager.get(e):e,t&&delete this.simultaneous[t.id],this}requireFailure(e){if(Array.isArray(e)){for(const t of e)this.requireFailure(t);return this}let t;if("string"==typeof e){if(t=this.manager.get(e),!t)throw new Error(`Cannot find recognizer ${e}`)}else t=e;const{requireFail:n}=this;return-1===n.indexOf(t)&&(n.push(t),t.requireFailure(this)),this}dropRequireFailure(e){if(Array.isArray(e)){for(const t of e)this.dropRequireFailure(t);return this}let t;if(t="string"==typeof e?this.manager.get(e):e,t){const e=this.requireFail.indexOf(t);e>-1&&this.requireFail.splice(e,1)}return this}hasRequireFailures(){return Boolean(this.requireFail.find((e=>e.options.enable)))}canRecognizeWith(e){return Boolean(this.simultaneous[e.id])}emit(e){if(!e)return;const{state:t}=this;t<r.Ended&&this.manager.emit(this.options.event+P(t),e),this.manager.emit(this.options.event,e),e.additionalEvent&&this.manager.emit(e.additionalEvent,e),t>=r.Ended&&this.manager.emit(this.options.event+P(t),e)}tryEmit(e){this.canEmit()?this.emit(e):this.state=r.Failed}canEmit(){let e=0;for(;e<this.requireFail.length;){if(!(this.requireFail[e].state&(r.Failed|r.Possible)))return!1;e++}return!0}recognize(e){const t={...e};if(!this.options.enable)return this.reset(),void(this.state=r.Failed);this.state&(r.Recognized|r.Cancelled|r.Failed)&&(this.state=r.Possible),this.state=this.process(t),this.state&(r.Began|r.Changed|r.Ended|r.Cancelled)&&this.tryEmit(t)}getEventNames(){return[this.options.event]}reset(){}}class F extends j{attrTest(e){const t=this.options.pointers;return 0===t||e.pointers.length===t}process(e){const{state:t}=this,{eventType:n}=e,i=t&(r.Began|r.Changed),o=this.attrTest(e);return i&&(n&s.Cancel||!o)?t|r.Cancelled:i||o?n&s.End?t|r.Ended:t&r.Began?t|r.Changed:r.Began:r.Failed}}class X extends j{pTime=null;pCenter=null;_timer=null;_input=null;count=0;constructor(e){void 0===e&&(e={}),super({enable:!0,event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10,...e})}getTouchAction(){return[l]}process(e){const{options:t}=this,n=e.pointers.length===t.pointers,i=e.distance<t.threshold,o=e.deltaTime<t.time;if(this.reset(),e.eventType&s.Start&&0===this.count)return this.failTimeout();if(i&&o&&n){if(e.eventType!==s.End)return this.failTimeout();const n=!this.pTime||e.timeStamp-this.pTime<t.interval,i=!this.pCenter||y(this.pCenter,e.center)<t.posThreshold;this.pTime=e.timeStamp,this.pCenter=e.center,i&&n?this.count+=1:this.count=1,this._input=e;if(0===this.count%t.taps)return this.hasRequireFailures()?(this._timer=setTimeout((()=>{this.state=r.Recognized,this.tryEmit(this._input)}),t.interval),r.Began):r.Recognized}return r.Failed}failTimeout(){return this._timer=setTimeout((()=>{this.state=r.Failed}),this.options.interval),r.Failed}reset(){clearTimeout(this._timer)}emit(e){this.state===r.Recognized&&(e.tapCount=this.count,this.manager.emit(this.options.event,e))}}const Y=["","start","move","end","cancel","up","down","left","right"];class D extends F{constructor(e){void 0===e&&(e={}),super({enable:!0,pointers:1,event:"pan",threshold:10,direction:o.All,...e}),this.pX=null,this.pY=null}getTouchAction(){const{options:{direction:e}}=this,t=[];return e&o.Horizontal&&t.push(p),e&o.Vertical&&t.push(h),t}getEventNames(){return Y.map((e=>this.options.event+e))}directionTest(e){const{options:t}=this;let n=!0,{distance:i}=e,{direction:s}=e;const r=e.deltaX,a=e.deltaY;return s&t.direction||(t.direction&o.Horizontal?(s=0===r?o.None:r<0?o.Left:o.Right,n=r!==this.pX,i=Math.abs(e.deltaX)):(s=0===a?o.None:a<0?o.Up:o.Down,n=a!==this.pY,i=Math.abs(e.deltaY))),e.direction=s,n&&i>t.threshold&&Boolean(s&t.direction)}attrTest(e){return super.attrTest(e)&&(Boolean(this.state&r.Began)||!(this.state&r.Began)&&this.directionTest(e))}emit(e){this.pX=e.deltaX,this.pY=e.deltaY;const t=o[e.direction].toLowerCase();t&&(e.additionalEvent=this.options.event+t),super.emit(e)}}const O=["","up","down","left","right"];class L extends F{constructor(e){void 0===e&&(e={}),super({enable:!0,event:"swipe",threshold:10,velocity:.3,direction:o.All,pointers:1,...e})}getTouchAction(){return D.prototype.getTouchAction.call(this)}getEventNames(){return O.map((e=>this.options.event+e))}attrTest(e){const{direction:t}=this.options;let n=0;return t&o.All?n=e.overallVelocity:t&o.Horizontal?n=e.overallVelocityX:t&o.Vertical&&(n=e.overallVelocityY),super.attrTest(e)&&Boolean(t&e.offsetDirection)&&e.distance>this.options.threshold&&e.maxPointers===this.options.pointers&&Math.abs(n)>this.options.velocity&&Boolean(e.eventType&s.End)}emit(e){const t=o[e.offsetDirection].toLowerCase();t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}const N=["","start","move","end","cancel","in","out"];class H extends F{constructor(e){void 0===e&&(e={}),super({enable:!0,event:"pinch",threshold:0,pointers:2,...e})}getTouchAction(){return[c]}getEventNames(){return N.map((e=>this.options.event+e))}attrTest(e){return super.attrTest(e)&&(Math.abs(e.scale-1)>this.options.threshold||Boolean(this.state&r.Began))}emit(e){if(1!==e.scale){const t=e.scale<1?"in":"out";e.additionalEvent=this.options.event+t}super.emit(e)}}const S=["","start","move","end","cancel"];class q extends F{constructor(e){void 0===e&&(e={}),super({enable:!0,event:"rotate",threshold:0,pointers:2,...e})}getTouchAction(){return[c]}getEventNames(){return S.map((e=>this.options.event+e))}attrTest(e){return super.attrTest(e)&&(Math.abs(e.rotation)>this.options.threshold||Boolean(this.state&r.Began))}}const W=["","up"];class V extends j{_timer=null;_input=null;constructor(e){void 0===e&&(e={}),super({enable:!0,event:"press",pointers:1,time:251,threshold:9,...e})}getTouchAction(){return[a]}getEventNames(){return W.map((e=>this.options.event+e))}process(e){const{options:t}=this,n=e.pointers.length===t.pointers,i=e.distance<t.threshold,o=e.deltaTime>t.time;if(this._input=e,!i||!n||e.eventType&(s.End|s.Cancel)&&!o)this.reset();else if(e.eventType&s.Start)this.reset(),this._timer=setTimeout((()=>{this.state=r.Recognized,this.tryEmit()}),t.time);else if(e.eventType&s.End)return r.Recognized;return r.Failed}reset(){clearTimeout(this._timer)}emit(e){this.state===r.Recognized&&(e&&e.eventType&s.End?this.manager.emit(`${this.options.event}up`,e):(this._input.timeStamp=Date.now(),this.manager.emit(this.options.event,this._input)))}}class U{constructor(e,t,n){this.element=e,this.callback=t,this.options=n}}const $="undefined"!=typeof navigator&&navigator.userAgent?navigator.userAgent.toLowerCase():"",K=("undefined"!=typeof window?window:n.g,void 0!==n.g?n.g:window,"undefined"!=typeof document&&document,-1!==$.indexOf("firefox")),G=4.000244140625;class J extends U{constructor(e,t,n){super(e,t,{enable:!0,...n}),e.addEventListener("wheel",this.handleEvent,{passive:!1})}destroy(){this.element.removeEventListener("wheel",this.handleEvent)}enableEventType(e,t){"wheel"===e&&(this.options.enable=t)}handleEvent=e=>{if(!this.options.enable)return;let t=e.deltaY;globalThis.WheelEvent&&(K&&e.deltaMode===globalThis.WheelEvent.DOM_DELTA_PIXEL&&(t/=globalThis.devicePixelRatio),e.deltaMode===globalThis.WheelEvent.DOM_DELTA_LINE&&(t*=40)),0!==t&&t%G==0&&(t=Math.floor(t/G)),e.shiftKey&&t&&(t*=.25),this.callback({type:"wheel",center:{x:e.clientX,y:e.clientY},delta:-t,srcEvent:e,pointerType:"mouse",target:e.target})}}const Q=["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"];class Z extends U{constructor(e,t,n){super(e,t,{enable:!0,...n}),this.pressed=!1;const{enable:i}=this.options;this.enableMoveEvent=i,this.enableLeaveEvent=i,this.enableEnterEvent=i,this.enableOutEvent=i,this.enableOverEvent=i,Q.forEach((t=>e.addEventListener(t,this.handleEvent)))}destroy(){Q.forEach((e=>this.element.removeEventListener(e,this.handleEvent)))}enableEventType(e,t){switch(e){case"pointermove":this.enableMoveEvent=t;break;case"pointerover":this.enableOverEvent=t;break;case"pointerout":this.enableOutEvent=t;break;case"pointerenter":this.enableEnterEvent=t;break;case"pointerleave":this.enableLeaveEvent=t}}handleEvent=e=>{this.handleOverEvent(e),this.handleOutEvent(e),this.handleEnterEvent(e),this.handleLeaveEvent(e),this.handleMoveEvent(e)};handleOverEvent(e){this.enableOverEvent&&"mouseover"===e.type&&this._emit("pointerover",e)}handleOutEvent(e){this.enableOutEvent&&"mouseout"===e.type&&this._emit("pointerout",e)}handleEnterEvent(e){this.enableEnterEvent&&"mouseenter"===e.type&&this._emit("pointerenter",e)}handleLeaveEvent(e){this.enableLeaveEvent&&"mouseleave"===e.type&&this._emit("pointerleave",e)}handleMoveEvent(e){if(this.enableMoveEvent)switch(e.type){case"mousedown":e.button>=0&&(this.pressed=!0);break;case"mousemove":0===e.buttons&&(this.pressed=!1),this.pressed||this._emit("pointermove",e);break;case"mouseup":this.pressed=!1}}_emit(e,t){this.callback({type:e,center:{x:t.clientX,y:t.clientY},srcEvent:t,pointerType:"mouse",target:t.target})}}const ee=["keydown","keyup"];class te extends U{constructor(e,t,n){super(e,t,{enable:!0,tabIndex:0,...n}),this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,e.tabIndex=this.options.tabIndex,e.style.outline="none",ee.forEach((t=>e.addEventListener(t,this.handleEvent)))}destroy(){ee.forEach((e=>this.element.removeEventListener(e,this.handleEvent)))}enableEventType(e,t){"keydown"===e&&(this.enableDownEvent=t),"keyup"===e&&(this.enableUpEvent=t)}handleEvent=e=>{const t=e.target||e.srcElement;"INPUT"===t.tagName&&"text"===t.type||"TEXTAREA"===t.tagName||(this.enableDownEvent&&"keydown"===e.type&&this.callback({type:"keydown",srcEvent:e,key:e.key,target:e.target}),this.enableUpEvent&&"keyup"===e.type&&this.callback({type:"keyup",srcEvent:e,key:e.key,target:e.target}))}}class ne extends U{constructor(e,t,n){super(e,t,n),e.addEventListener("contextmenu",this.handleEvent)}destroy(){this.element.removeEventListener("contextmenu",this.handleEvent)}enableEventType(e,t){"contextmenu"===e&&(this.options.enable=t)}handleEvent=e=>{this.options.enable&&this.callback({type:"contextmenu",center:{x:e.clientX,y:e.clientY},srcEvent:e,pointerType:"mouse",target:e.target})}}const ie={pointerdown:1,pointermove:2,pointerup:4,mousedown:1,mousemove:2,mouseup:4};function se(e){const t=ie[e.srcEvent.type];if(!t)return null;const{buttons:n,button:i}=e.srcEvent;let s=!1,o=!1,r=!1;return 2===t?(s=Boolean(1&n),o=Boolean(4&n),r=Boolean(2&n)):(s=0===i,o=1===i,r=2===i),{leftButton:s,middleButton:o,rightButton:r}}function oe(e,t){const n=e.center;if(!n)return null;const i=t.getBoundingClientRect(),s=i.width/t.offsetWidth||1,o=i.height/t.offsetHeight||1;return{center:n,offsetCenter:{x:(n.x-i.left-t.clientLeft)/s,y:(n.y-i.top-t.clientTop)/o}}}const re={srcElement:"root",priority:0};class ae{constructor(e,t){this.eventManager=e,this.recognizerName=t,this.handlers=[],this.handlersByElement=new Map,this._active=!1}isEmpty(){return!this._active}add(e,t,n,i,s){void 0===i&&(i=!1),void 0===s&&(s=!1);const{handlers:o,handlersByElement:r}=this,a={...re,...n};let l=r.get(a.srcElement);l||(l=[],r.set(a.srcElement,l));const c={type:e,handler:t,srcElement:a.srcElement,priority:a.priority};i&&(c.once=!0),s&&(c.passive=!0),o.push(c),this._active=this._active||!c.passive;let h=l.length-1;for(;h>=0&&!(l[h].priority>=c.priority);)h--;l.splice(h+1,0,c)}remove(e,t){const{handlers:n,handlersByElement:i}=this;for(let s=n.length-1;s>=0;s--){const o=n[s];if(o.type===e&&o.handler===t){n.splice(s,1);const e=i.get(o.srcElement);e.splice(e.indexOf(o),1),0===e.length&&i.delete(o.srcElement)}}this._active=n.some((e=>!e.passive))}handleEvent=e=>{if(this.isEmpty())return;const t=this._normalizeEvent(e);let n=e.srcEvent.target;for(;n&&n!==t.rootElement;){if(this._emit(t,n),t.handled)return;n=n.parentNode}this._emit(t,"root")};_emit(e,t){const n=this.handlersByElement.get(t);if(n){let t=!1;const i=()=>{e.handled=!0},s=()=>{e.handled=!0,t=!0},o=[];for(let r=0;r<n.length;r++){const{type:a,handler:l,once:c}=n[r];if(l({...e,type:a,stopPropagation:i,stopImmediatePropagation:s}),c&&o.push(n[r]),t)break}for(let e=0;e<o.length;e++){const{type:t,handler:n}=o[e];this.remove(t,n)}}}_normalizeEvent(e){const t=this.eventManager.getElement();return{...e,...se(e),...oe(e,t),preventDefault:()=>{e.srcEvent.preventDefault()},stopImmediatePropagation:null,stopPropagation:null,handled:!1,rootElement:t}}}function le(e){if("recognizer"in e)return e;let t;const n=Array.isArray(e)?[...e]:[e];if("function"==typeof n[0]){t=new(n.shift())(n.shift()||{})}else t=n.shift();return{recognizer:t,recognizeWith:"string"==typeof n[0]?[n[0]]:n[0],requireFailure:"string"==typeof n[1]?[n[1]]:n[1]}}class ce{constructor(e,t){if(void 0===e&&(e=null),void 0===t&&(t={}),this.options={recognizers:[],events:{},touchAction:"compute",tabIndex:0,cssProps:{},...t},this.events=new Map,this.element=e,e){this.manager=new B(e,this.options);for(const e of this.options.recognizers){const{recognizer:t,recognizeWith:n,requireFailure:i}=le(e);this.manager.add(t),n&&t.recognizeWith(n),i&&t.requireFailure(i)}this.manager.on("hammer.input",this._onBasicInput),this.wheelInput=new J(e,this._onOtherEvent,{enable:!1}),this.moveInput=new Z(e,this._onOtherEvent,{enable:!1}),this.keyInput=new te(e,this._onOtherEvent,{enable:!1,tabIndex:t.tabIndex}),this.contextmenuInput=new ne(e,this._onOtherEvent,{enable:!1}),this.on(this.options.events)}}getElement(){return this.element}destroy(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy())}on(e,t,n){this._addEventHandler(e,t,n,!1)}once(e,t,n){this._addEventHandler(e,t,n,!0)}watch(e,t,n){this._addEventHandler(e,t,n,!1,!0)}off(e,t){this._removeEventHandler(e,t)}_toggleRecognizer(e,t){const{manager:n}=this;if(!n)return;const i=n.get(e);i&&(i.set({enable:t}),n.touchAction.update()),this.wheelInput?.enableEventType(e,t),this.moveInput?.enableEventType(e,t),this.keyInput?.enableEventType(e,t),this.contextmenuInput?.enableEventType(e,t)}_addEventHandler(e,t,n,i,s){if("string"!=typeof e){n=t;for(const[t,o]of Object.entries(e))this._addEventHandler(t,o,n,i,s);return}const{manager:o,events:r}=this;if(!o)return;let a=r.get(e);if(!a){const t=this._getRecognizerName(e)||e;a=new ae(this,t),r.set(e,a),o&&o.on(e,a.handleEvent)}a.add(e,t,n,i,s),a.isEmpty()||this._toggleRecognizer(a.recognizerName,!0)}_removeEventHandler(e,t){if("string"!=typeof e){for(const[t,n]of Object.entries(e))this._removeEventHandler(t,n);return}const{events:n}=this,i=n.get(e);if(i&&(i.remove(e,t),i.isEmpty())){const{recognizerName:e}=i;let t=!1;for(const i of n.values())if(i.recognizerName===e&&!i.isEmpty()){t=!0;break}t||this._toggleRecognizer(e,!1)}}_getRecognizerName(e){return this.manager.recognizers.find((t=>t.getEventNames().includes(e)))?.options.event}_onBasicInput=e=>{this.manager.emit(e.srcEvent.type,e)};_onOtherEvent=e=>{this.manager.emit(e.type,e)}}},8453:(e,t,n)=>{n.d(t,{R:()=>r,x:()=>a});var i=n(6540);const s={},o=i.createContext(s);function r(e){const t=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),i.createElement(o.Provider,{value:t},e.children)}}}]);